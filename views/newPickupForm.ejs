
    <form id="newPickupForm" class="textCenter" action="/pickup/add" method="post" style="display: ''; text-align: center;" onsubmit="addPickup(this,event)">
        <input type="date" name="date" required>
            <br>
            <br>
            <select name="facilityId" class="primaryStyle" style="font-size: 100%;" autocomplete="off" onchange="getMax(this)" required>
                <option value="" disabled selected>Facility</option>
                <% for(var i=0; i< data.facilities.length; i++) {%>
                    <option value="<%= data.facilities[i].id%>"><%= data.facilities[i].name%></option>
                <% } %>
            </select>
            <br>
            <br>
            <label for="maxPlayers">Max Players: <input type="number" name="maxPlayers" value="10"></label>
            <br>
            <br>
            <label for="active"><input type="checkbox" name="active" checked> Active</label>
            <br>
            <br>
            <button type="submit" class="primaryStyle primaryBorder" style="font-weight: bold; width: auto; height: 5vh;">Add Pickup</button>
    </form>
    <script>
        async function getMax(ele) {
                switch(ele.value){
                        case '1000000000':
                                ele.form.querySelector('[name="maxPlayers"]').value = 16
                                break
                        default:
                                ele.form.querySelector('[name="maxPlayers"]').value = 10
                                break
                }
        }
        async function addPickup(form,event) {
        
        event.preventDefault()
        const dateInput = form.querySelector('[name="date"]').value;
        if (!dateInput) {
        alert('Please select a date.');
        return;
        }
    
        const localTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone || 'America/New_York';
        const date = new Date(dateInput + 'T00:00:00'); // Midnight in the local timezone
        const unixMillis = date.getTime();
        var formData = new FormData(form)
        formData.set('date', unixMillis)
        const response = await fetch('/pickup/add', {
        method: 'POST',
        headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
        },
        body: new URLSearchParams(formData).toString(),
        });
        };
      </script>